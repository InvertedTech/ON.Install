syntax = "proto3";

package stripe;

import "google/protobuf/struct.proto";
import "google/protobuf/timestamp.proto";
import "google/protobuf/empty.proto";

// TODO: Lock services behind auth
service StripeService {
  rpc WriteStripeData(StripeData) returns (google.protobuf.Empty) {};
  rpc ReadStripeData(google.protobuf.Empty) returns (StripeData) {};
}

message StripeId {
  string stripeId = 1;
}

message StripeRequest {
  string id = 1;
  google.protobuf.Timestamp created = 2;
  StripeId stripeId = 3;
  StripeData stripeData = 4;
}

message StripeResponse {
  string id = 1;
  google.protobuf.Timestamp created = 2;
  string responseMessage = 3;
  bool success = 4;
  google.protobuf.Struct errors = 5;
}

message StripeData {
  google.protobuf.Timestamp created = 1;
  repeated StripeId subscriptionItems = 2;
  repeated StripeId customers = 3;
  repeated StripeId subscriptions = 4;
}


 